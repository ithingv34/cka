<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>클러스터 고가용성(HA) 관리 |  Certified Kubernetes Administrator (CKA)</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/devops_stack/assets/css/0.styles.c4bf43de.css" as="style"><link rel="preload" href="/devops_stack/assets/js/app.edb6ec7a.js" as="script"><link rel="preload" href="/devops_stack/assets/js/2.d7118089.js" as="script"><link rel="preload" href="/devops_stack/assets/js/8.d7d30e29.js" as="script"><link rel="prefetch" href="/devops_stack/assets/js/10.6ef1ed52.js"><link rel="prefetch" href="/devops_stack/assets/js/11.901b1318.js"><link rel="prefetch" href="/devops_stack/assets/js/12.40f20e7b.js"><link rel="prefetch" href="/devops_stack/assets/js/13.c5675a20.js"><link rel="prefetch" href="/devops_stack/assets/js/14.fc4b9492.js"><link rel="prefetch" href="/devops_stack/assets/js/15.7274da97.js"><link rel="prefetch" href="/devops_stack/assets/js/16.ba253dca.js"><link rel="prefetch" href="/devops_stack/assets/js/17.8d7173ed.js"><link rel="prefetch" href="/devops_stack/assets/js/18.444f652b.js"><link rel="prefetch" href="/devops_stack/assets/js/19.5c40776e.js"><link rel="prefetch" href="/devops_stack/assets/js/20.971c14df.js"><link rel="prefetch" href="/devops_stack/assets/js/21.2f108077.js"><link rel="prefetch" href="/devops_stack/assets/js/22.df4926d3.js"><link rel="prefetch" href="/devops_stack/assets/js/23.06677d3c.js"><link rel="prefetch" href="/devops_stack/assets/js/24.8ce7d6e5.js"><link rel="prefetch" href="/devops_stack/assets/js/25.c6342015.js"><link rel="prefetch" href="/devops_stack/assets/js/26.3e22c156.js"><link rel="prefetch" href="/devops_stack/assets/js/27.304176ff.js"><link rel="prefetch" href="/devops_stack/assets/js/28.12ba7b33.js"><link rel="prefetch" href="/devops_stack/assets/js/29.61b2a492.js"><link rel="prefetch" href="/devops_stack/assets/js/3.cd70506a.js"><link rel="prefetch" href="/devops_stack/assets/js/30.af9f12b0.js"><link rel="prefetch" href="/devops_stack/assets/js/4.4d035bb6.js"><link rel="prefetch" href="/devops_stack/assets/js/5.ea5a5e54.js"><link rel="prefetch" href="/devops_stack/assets/js/6.44607573.js"><link rel="prefetch" href="/devops_stack/assets/js/7.8923e0a1.js"><link rel="prefetch" href="/devops_stack/assets/js/9.021f254a.js">
    <link rel="stylesheet" href="/devops_stack/assets/css/0.styles.c4bf43de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/devops_stack/" class="home-link router-link-active"><!----> <span class="site-name"> Certified Kubernetes Administrator (CKA)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/devops_stack/" class="nav-link">
  Home
</a></div> <a href="https://github.com/ithingv34/devops_stack" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/devops_stack/" class="nav-link">
  Home
</a></div> <a href="https://github.com/ithingv34/devops_stack" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/devops_stack/" aria-current="page" class="sidebar-link">Certified Kubernetes Administrator (CKA)</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/devops_stack/src/CKA/" class="sidebar-heading clickable"><span>CKA</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/devops_stack/src/ClusterArchitecture/" class="sidebar-heading clickable router-link-active open"><span>ClusterArchitecture</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_stack/src/ClusterArchitecture/" aria-current="page" class="sidebar-link">클러스터 아키텍처, 설치 및 구성 [25%]</a></li><li><a href="/devops_stack/src/ClusterArchitecture/1_RBAC.html" class="sidebar-link">역할 기반 액세스 제어 (RBAC)</a></li><li><a href="/devops_stack/src/ClusterArchitecture/2_Cluster_Installation.html" class="sidebar-link">클러스터 설치</a></li><li><a href="/devops_stack/src/ClusterArchitecture/3_Version_Upgrade.html" class="sidebar-link">클러스터 버전 업그레이드</a></li><li><a href="/devops_stack/src/ClusterArchitecture/4_Etcd_backup_Restoring.html" class="sidebar-link">etcd DB 백업 및 복원</a></li><li><a href="/devops_stack/src/ClusterArchitecture/5_Cluster_HA.html" aria-current="page" class="active sidebar-link">클러스터 고가용성(HA) 관리</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/devops_stack/src/Workloads Scheduling/" class="sidebar-heading clickable"><span>Workloads Scheduling</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/devops_stack/src/Services Networking/" class="sidebar-heading clickable"><span>Services Networking</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/devops_stack/src/Storage/" class="sidebar-heading clickable"><span>Storage</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/devops_stack/src/TroubleShooting/" class="sidebar-heading clickable"><span>TroubleShooting</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="클러스터-고가용성-ha-관리"><a href="#클러스터-고가용성-ha-관리" class="header-anchor">#</a> 클러스터 고가용성(HA) 관리</h1> <p><strong>단일 클러스터 설치의 한계</strong></p> <ul><li>프로덕션 레벨에서는 단일 클러스터 보다는 여러개의 클러스터를 설치하는 것이 일반적이다.</li> <li>만약 <code>Control Plane</code> 노드에 장애가 발생하면
<code>kubectl</code>로 API에 연결할 수 없어 외부에서 클러스터에 액세스 할 수 없게된다.</li> <li>또한 <code>Worker</code> 노드에서 실행 중인 ReplicaSet은 Control Plane에서 실행 중인 스케줄러와 대화할 수 없기 때문에 Pod를 재생성 할 수 없다.</li></ul> <hr> <p><strong>예시</strong></p> <p><strong>1. 3개의 Control Plane 노드가 있는 Stack 형 Etcd 토폴로지</strong></p> <img src="/devops_stack/assets/img/1-8.e344b06f.png"> <ul><li>etcd가 노드에 함께 배치된 3개의 Control Plane 노드가 생성된다.</li> <li>각 Control Plane 노드는 API 서버, 스케줄러 및 컨트롤러 관리자를 호스팅한다.</li> <li>Worker 노드는 로드 밸런서를 통해 API 서버와 통신한다.</li> <li>Control Plane에 대한 <strong>긴밀한 결합</strong>으로 인한 중복성을 위해 최소 <code>3</code>개의 Control Plane 노드로 클러스터를 구성하는 것이 좋다.</li> <li>기본적으로 <code>kubeadm</code> Control Plane 노드를 클러스터에 연결할 때 etcd 인스턴스를 생성한다.</li></ul> <hr> <p><strong>2. 외부 etcd 노드 토폴로지</strong></p> <img src="/devops_stack/assets/img/1-9.89a3cce4.png"> <br> <ul><li>1번 토폴로지와 달리 etcd를 Control Plane에서 분리하는 토폴로지이다.</li> <li>etcd 인스턴스가 별도의 호스트에서 실행된다는 것이 차이점이다.</li> <li>이 토폴로지의 경우 etcd를 다른 Control Plane 기능에서 분리하기 때문에 Control Plane가 손실될 때 중복성이 미치는 영향이 적다.</li> <li>하지만 이 토폴로지는 위의 토폴로지보다 두 배 많은 호스트가 필요하기 때문에 관리 복잡도가 증가한다.</li></ul> <hr> <p><strong>참고자료</strong></p> <ul><li><a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/ha-topology/" target="_blank" rel="noopener noreferrer">고가용성 클러스터 토폴로지 구성하기<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ithingv34/devops_stack/edit/main/src/ClusterArchitecture/5_Cluster_HA.md" target="_blank" rel="noopener noreferrer">잘못된 부분이 있다면 수정해주세요🙌!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/12/2023, 1:30:15 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/devops_stack/src/ClusterArchitecture/4_Etcd_backup_Restoring.html" class="prev">
        etcd DB 백업 및 복원
      </a></span> <span class="next"><a href="/devops_stack/src/Workloads%20Scheduling/">
        작업 관리 및 스케줄링 [15%]
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/devops_stack/assets/js/app.edb6ec7a.js" defer></script><script src="/devops_stack/assets/js/2.d7118089.js" defer></script><script src="/devops_stack/assets/js/8.d7d30e29.js" defer></script>
  </body>
</html>
